
FLAGS       =  -DSUN_UNIX -DLINUX -DPDS_TOOLBOX -DLV_TOOL

#this is the path to the ODL library and header files. Change as needed.
ODLC_DIR    =  odlc
LABLIB_DIR =  lablib
LIB_DIR = lib

LVTOOL_DIR = legacy/lvtool
SHARED_DIR = legacy/shared

INC_PATH = -I$(ODLC_DIR) -I$(LABLIB_DIR) -I$(LVTOOL_DIR) -I$(SHARED_DIR)
LIB_PATH = -L$(LIB_DIR)

LIBS = -lm -lodlc_lablib_lvtool
#
#        Translator Options
#
#CCOPTS      = -c -O $(INC_PATH)
CCOPTS = -O -c $(INC_PATH)
LDOPTS      = $(LIB_PATH)


#
#        Translator Definitions
#
CC        = gcc
LD        = gcc

#
#        Utility Definitions
#
COPY_CMD  = cp
DEL_CMD   = rm
MOVE_CMD  = mv

.c.o:
	$(CC) $(FLAGS) $(CCOPTS) $< -o $@
#
#
#
#        Application Targets and Dependencies
#
all:      bin/lvtool

clean:
	- $(DEL_CMD) $(LVTOOL_DIR)/*.o $(SHARED_DIR)/*.o
	- $(DEL_CMD) bin/lvtool

#
#        List the project object modules
#
OBJECTFILES1 = $(SHARED_DIR)/convert.o $(SHARED_DIR)/ddaccess.o $(SHARED_DIR)/labtool.o $(SHARED_DIR)/verlabel.o $(LVTOOL_DIR)/lvtool.o $(SHARED_DIR)/search.o $(LVTOOL_DIR)/lvtool_utils.o

OBJECTFILES = $(OBJECTFILES1)

#
#        List the project dependencies
#

$(SHARED_DIR)/convert.o: $(SHARED_DIR)/convert.c $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/convert.h

$(SHARED_DIR)/ddaccess.o: $(SHARED_DIR)/ddaccess.c $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/ddaccess.h $(SHARED_DIR)/verlabel.h

$(SHARED_DIR)/labtool.o: $(SHARED_DIR)/labtool.c $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/labtool.h

$(SHARED_DIR)/verlabel.o: $(SHARED_DIR)/verlabel.c $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/verlabel.h $(SHARED_DIR)/ddaccess.h $(SHARED_DIR)/search.h

$(SHARED_DIR)/search.o: $(SHARED_DIR)/search.c $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/search.h

$(LVTOOL_DIR)/lvtool.o: $(LVTOOL_DIR)/lvtool.c $(ODLC_DIR)/pdsdef.h $(ODLC_DIR)/pdsglob.h $(SHARED_DIR)/ddaccess.h $(SHARED_DIR)/labtool.h $(SHARED_DIR)/verlabel.h

$(LVTOOL_DIR)/lvtool_utils.o: $(LVTOOL_DIR)/lvtool_utils.c $(LVTOOL_DIR)/lvtool_utils.h

#
#        Application link line
#
bin/lvtool: $(OBJECTFILES) 
	$(LD) $(OBJECTFILES) $(LDOPTS) $(LIBS) -o $@

