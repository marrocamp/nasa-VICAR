
FLAGS       =  -DSUN_UNIX -DLINUX -DPDS_TOOLBOX -DLV_DDICT -DLV_KWVTOOL

#This is the path to the ODL library and header files. Change as needed.
ODLC_DIR    =  odlc
LABLIB_DIR = lablib
LIB_DIR = lib

KWVTOOL_DIR = legacy/kwvtool
SHARED_DIR = legacy/shared
	
INC_PATH  = -I$(ODLC_DIR) -I$(LABLIB_DIR) -I$(KWVTOOL_DIR) -I$(SHARED_DIR)
LIB_PATH  = -L$(LIB_DIR)

LIBS = -lm -lodlc_lablib_kwvtool


#
#        Translator Options
#
#CCOPTS      = -c -O $(INC_PATH)
CCOPTS = -c -O $(INC_PATH)
LDOPTS      = $(LIB_PATH)


#
#        Translator Definitions
#
CC        = gcc
LD        = gcc

#
#        Utility Definitions
#
COPY_CMD  = cp
DEL_CMD   = rm
MOVE_CMD  = mv

.c.o:
	$(CC) $(FLAGS) $(CCOPTS) $< -o $@
#
#
#
#        Application Targets and Dependencies
#
all:     bin/kwvtool 

clean:
	- $(DEL_CMD) $(KWVTOOL_DIR)/*.o $(SHARED_DIR)/*.o bin/kwvtool

#
#        List the project object modules
#
OBJECTFILES1 = $(SHARED_DIR)/convert.o $(SHARED_DIR)/ddaccess.o $(SHARED_DIR)/labtool.o $(SHARED_DIR)/verlabel.o $(KWVTOOL_DIR)/kwvtool.o $(SHARED_DIR)/search.o

OBJECTFILES = $(OBJECTFILES1)

#
#        List the project dependencies
#

$(SHARED_DIR)/convert.o: $(SHARED_DIR)/convert.c $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/convert.h $(ODLC_DIR)/utildef.h

$(SHARED_DIR)/ddaccess.o: $(SHARED_DIR)/ddaccess.c $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/ddaccess.h $(LABLIB_DIR)/errordef.h $(LABLIB_DIR)/fiodef.h\
            $(LABLIB_DIR)/label.h $(ODLC_DIR)/utildef.h $(LABLIB_DIR)/labutil.h $(SHARED_DIR)/verlabel.h $(ODLC_DIR)/sysdef.h

$(SHARED_DIR)/labtool.o: $(SHARED_DIR)/labtool.c $(ODLC_DIR)/pdsdef.h $(LABLIB_DIR)/label.h $(SHARED_DIR)/labtool.h $(LABLIB_DIR)/labutil.h $(ODLC_DIR)/utildef.h \
           $(LABLIB_DIR)/errordef.h $(ODLC_DIR)/sysdef.h

$(SHARED_DIR)/verlabel.o: $(SHARED_DIR)/verlabel.c $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/verlabel.h $(SHARED_DIR)/ddaccess.h $(LABLIB_DIR)/label.h $(LABLIB_DIR)/labutil.h \
           $(SHARED_DIR)/search.h $(LABLIB_DIR)/errordef.h $(ODLC_DIR)/utildef.h

$(SHARED_DIR)/search.o: $(SHARED_DIR)/search.h $(ODLC_DIR)/pdsdef.h $(SHARED_DIR)/search.h $(LABLIB_DIR)/errordef.h $(ODLC_DIR)/utildef.h

$(KWVTOOL_DIR)/kwvtool.o: $(KWVTOOL_DIR)/kwvtool.c $(ODLC_DIR)/pdsdef.h $(ODLC_DIR)/pdsglob.h $(SHARED_DIR)/ddaccess.h $(LABLIB_DIR)/errordef.h $(LABLIB_DIR)/fiodef.h $(LABLIB_DIR)/label.h \
          $(LABLIB_DIR)/labutil.h $(SHARED_DIR)/labtool.h $(ODLC_DIR)/sysdef.h $(ODLC_DIR)/utildef.h $(SHARED_DIR)/verlabel.h


#
#        Application link line
#
bin/kwvtool: $(OBJECTFILES) 
	$(LD) $(OBJECTFILES) $(LDOPTS) $(LIBS) -o $@

 
