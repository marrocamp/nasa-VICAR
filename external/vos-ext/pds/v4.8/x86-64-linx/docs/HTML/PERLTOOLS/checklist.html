<html>
<head><title>Validation Checklist</title></head>
<body bgcolor="white">

<h1 align="center">The Validation Checklist</h1>

<h2 align="center">For PDS Version 3</h2>

<p align="center">By Joel Wilf</p>

<p>
PDS Central Node<br>
Review Draft 2.5<br>
March 17, 2000<br>
</p>

<h3>1. Introduction</h3>

<p>The Planetary Data System (PDS) ensures the quality of its product in
two ways. The first is <b>peer review</b>, where the focus is on the
scientific value of the data and documentation. Peer review answers the
question, "How well does the product serve its scientific users?" The second
is <b>validation</b>, where the emphasis is on overall quality and conformance
to PDS standards. Validation answers the question, "How well does the product
fit the PDS model?"</p>

<p>Validation improves the quality and consistency of each volume. But
more important, it ties together the entire collection of PDS volumes.
It creates a framework for building software, searchable catalogs, and
complete information systems around the set of PDS volumes. It makes the
difference between a collection of CDs and an archive.</p>

<p>Validation is central to PDS. But it can be difficult in practice. 
Historically, validation has depended on the judgment of the data engineer
examining the volume. There are good reasons for this. Some of the checks
are qualitative by nature. Also, PDS standards are complex, having evolved
over nearly a decade of use.</p>

<p>Perhaps the biggest problem with validation has been ensuring
consistency. One data engineer may object to what another has passed.
Validation may also be confusing to the data producer, who doesn't
know what to expect. For these reasons, a checklist was developed,
which shows all the tests that are part of the validation process.</p>

<h3>1.1. Document Purpose</h3>

<p>This document presents the validation checklist. The checklist
should:</p>

<ul>
  <li>Make the practice of validation more consistent</li>
  <li>Improve understanding of the validation process</li>
  <li>Enable PDS discipline nodes to perform as many validation checks as
      possible</li>
  <li>Provide guidelines for writing software that assists in validation</li>
</ul>

<h3>1.2. Document Scope</h3>

<p>The validation checklist shows how to apply the standards. It is not 
a substitute for the standards, themselves. The <u>PDS Standards Reference</u>
is still the canonical source of standards information. When there is a
conflict between the checklist and the <u>PDS Standards</u>, it is the
checklist that should be modified.</p>

<p>The validation checklist describes <i>what</i> to test. For the most
part, it does not discuss the tools to use for testing. Think of it as 
providing the requirements for such tools.</p>

<p>There are two parts to the checklist. The first part summarizes the
checklist as a table. This gives a high-level view of the validation process.
It also makes it easy to "check off" each step as it is performed in an actual
validation.  The second part describes each step in detail.</p>

<h3>2. Validation Checklist</h3>

<p>The following steps are taken to ensure a valid PDS volume.  Whenever
possible, the steps are linked to an appropriate section of the <u>PDS
Standards Reference</u>. Some steps fall under the category of general quality
assurance, and these are labeled "General QA" in the list:</p>

<table border="1">
<tr><th colspan="3" bgcolor="#CCCCCC">Validation Checklist<br>
Step-by-Step</th></tr>
<tr><td><b>Step</b></td><td><b>Action</b></td><td><b>Standards</b></td></tr>

<tr><td colspan="3" bgcolor="#CCCCCC">
Part I: Get an Overview of the Volume</td></tr>
<tr>
  <td>1</td>
  <td>Read the top level files for a general understanding of the volume.
  <td>General QA</td>
</tr>

<tr><td colspan="3" bgcolor="#CCCCCC">
Part II: Validate the Volume, Directory, and File Structure</td></tr>
<tr>
  <td>2</td>
  <td>Check that the volume is ISO9660 level-1 or level-2 compliant.</td>
  <td>Section 10</td>
</tr>
<tr>
  <td>3</td>
  <td>Ensure that the directory tree drawn in AAREADME.TXT matches the actual
      volume.</td>
  <td>Appendix D 4.4</td>
</tr>
<tr>
  <td>4</td>
  <td>Make sure all required files and directories are present, with no
      extraneous files or directories.</td>
  <td>Section 19</td>
</tr>
<tr>
  <td>5</td>
  <td>Make sure that every file has an attached or detached label, and there
      are no zero-length files.</td>
  <td>Section 4.1, Section 5</td>
</tr>

<tr><td colspan="3" bgcolor="#CCCCCC">
Part III: Validate the Metadata</td></tr>
<tr>
  <td>6</td>
  <td>Check that all keywords that use formation rules have properly
      formed values.</t>
  <td>Section 19.4.1, Section 19.5.1</td>
</tr>
<tr>
  <td>7</td>
  <td>Check all labels on the volume for syntax and pointer errors.</td>
  <td>Section 12</td>
</tr>
<tr>
  <td>8</td>
  <td>Check that all keywords and standard values on the volume are in
      the Data Dictionary.</td>
  <td>Section 12</td>
</tr>
<tr>
  <td>9</td>
  <td>For attached labels, ensure that RECORD_TYPE, RECORD_BYTES,
      and related keywords are correct.</td>
  <td>Section 5.1.2</td>
</tr>
<tr>
  <td>10</td>
  <td>Check references.</td>
  <td>General QA</td>
</tr>

<tr><td colspan="3" bgcolor="#CCCCCC">
Part IV: Validate the Data Index</td></tr>
<tr>
  <td>11</td>
  <td>Validate the structure of INDEX.TAB and ensure that each entry
      points to a data file.</td>
  <td>Section 19.3</td>
</tr>
<tr>
  <td>12</td>
  <td>Make sure that every data file is pointed to in INDEX.TAB.</td>
  <td>Section 19.3</td>
</tr>
<tr>
  <td>13</td>
  <td>Make sure that CUMINDEX.TAB contains all the INDEX.TAB files for the
      volume set.</td>
  <td>Section 19.3</td>
</tr>
<tr>

<tr><td colspan="3" bgcolor="#CCCCCC">
Part V: Validate Files by Content</td></tr>
<tr>
  <td>14</td>
  <td>Make sure that all filenames have the proper extension, according to 
      the data in the file.</td>
  <td>Section 10.2</td>
</tr>
<tr>
  <td>15</td>
  <td>Check ASCII files for bad line terminators, line lengths, and
      embedded illegal characters.</td>
  <td>Section 5.1.1, Section 5.1.2</td>
</tr>
<tr>
  <td>16</td>
  <td>Check HTML files for valid syntax and working links.</td>
  <td>Section 22</td>
</tr>
<tr>
  <td>17</td>
  <td>Ensure that tabular data displays correctly with NASAView.</td>
  <td>Section 4</td>
</tr>
<tr>
  <td>18</td>
  <td>Ensure that images display correctly with NASAView.</td>
  <td>Section 4</td>
</tr>
<tr>
  <td>19</td>
  <td>Ensure that non-ASCII documents are readable.</td>
  <td>Section 9.2.2</td>
</tr>
<tr>
  <td>20</td>
  <td>Check spelling in text files.</td>
  <td>General QA</td>
</tr>
<tr>
  <td>21</td>
  <td>Verify Software.</td>
  <td>General QA</td>
</tr>

<tr><td colspan="3" bgcolor="#CCCCCC">
Part VI: Referential Integrity</td></tr>
<tr>
  <td>22</td>
  <td>Check keyword/value pairs for consistency.</td> 
  <td>General QA</td>
</tr>
<tr>
  <td>23</td>
  <td>Check catalog referential integrity through a test ingestion.</td>
  <td>General QA</td>
</tr>
</table>

<h3>3. Description of the Checklist</h3>

<p>The following describes each step of the validation checklist in more
detail:</p>

<p><b>Step 1 - Read the top level files for a general understanding of the
      volume:</b></p>

<p>Read the AAREADME.TXT, VOLDESC.CAT, ERRATA.TXT, and any included memos.
It is also important to read the DATASET.CAT, INST.CAT, INSTHOST.CAT, and
MISSION.CAT, if they are new or have been modified. Check that the
descriptions are written clearly. If done correctly, these files provide
a good overview of the volume.</p>

<p><b>Step 2 - Check that the volume is ISO9660 level-1 or level-2
     compliant:</b></p>

<p>All PDS volumes must be ISO9660 level-1 or level-2 compliant. These
standards require the following:</p>

<ul>
  <li>All directory and filenames must be uppercase.</li>
  <li>For ISO9660 level-1 compliance, filenames must adhere to the "8.3"
      standard: a one to eight-character base name, followed by a dot (.),
      followed by a one to three-character extension.  Directory names are
      not greater than eight characters.</li>
  <li>For ISO9660 level-2 compliance, filenames can be up to thirty
      characters in length.  The filenames consist of a base name,
      followed by a dot (.), followed by an extension of one or more
      characters.</li>
  <li>Directories should not be nested more than eight levels deep.</li>
</ul>

<p>When checking that filenames are uppercase, make sure that you are
looking at the filenames as they actually appear on the CD-ROM. For
example, when Windows NT Explorer reads ISO9660 filenames, it
capitalizes the first letter and lowercases the rest. But the older
Windows File Manager (winfile.exe) shows the filenames correctly as
uppercase.</p>

<p><b>Step 3 - Insure that the directory tree drawn in AAREADME.TXT matches
the volume:</b></p>

<p>The AAREADME.TXT shows the volume's file structure in the form of a
tree, with the root directory on top.  This must match the actual file
structure on the volume.</p>

<p>If there is an HTML version of the AAREADME.TXT file, it should be
named AAREADME.HTM and its directory tree display should have links to
the files on the volume. It should be verified that the links work
correctly.</p>

<p><b>Step 4 - Make sure all required directories and files are
      present:</b></p>

<p>Section 19 of the Standards describes the acceptable types of volume
organization.  Each type requires a certain directory structure.  You 
should determine which type of organization is used by the current volume,
then verify that the required directories and files are present. You
should also make sure that there are no extraneous root-level files or
directories.</p>

<p>In general, this means looking for:</p>

<ul>
  <li>Required root level files: AAREADME.TXT, VOLDESC.CAT, and
      ERRATA.TXT</li>
  <li>A file of the form xxxxINFO.TXT in all non-data directories</li>
  <li>Properly named files in CATALOG</li>
  <li>Properly named files in INDEX</li>
  <li>Text versions of non-ASCII files in DOCUMENT</li>
  <li>Extraneous directories and files at the root level</li>
</ul>

<p><b>Step 5 -  Make sure that every file has an attached or detached label,
      with no zero-length files:</b></p>

<p>Every file on the volume should either contain a label itself or
be pointed to by a label. It is important to ensure that there are no
zero-length files. These often indicate an error writing the CD-ROM.</p>

<p><b>Step 6 - Check that all keywords that use formation rules have properly
      formed values:</b></p>
      
<p>A formation rule is a method for constructing a value, usually a name or
ID string. Adhering to formation rules keeps names and IDs consistent. In PDS,
keywords that use formation rules include DATA_SET_ID, VOLUME_SET_ID, 
VOLUME_ID, and DATA_OBJECT_TYPE.</p>

<p>Make sure that the DATA_SET_ID has the form:</p>

<p>mission-target(s)-instrument-CODMAC level-version id</br>
For example:  DATA_SET_ID = "ESO-J/S/N/U-SPECTROPHOTOMETER-4-V2.0"</p>

<p>Further checking is necessary to ensure that each component of the
DATA_SET_ID makes sense. This means checking that:</p>

<ul>
  <li>The targets are specified correctly (each target should
      have a DATA_SET_TARGET object in the DATASET.CAT file)</li>
  <li>The CODMAC level conforms to Table 6-9 in the PDS Standards</li>
  <li>The DATA_SET_ID is unique within PDS (if the dataset is not
      ingested, it should not appear as a standard value in the
      data dictionary)</li>
</ul>

<p>The VOLUME_SET_ID should conform to PDS naming standards. For
projects funded by PDS, the designation should contain the PDS string.
For example, VOLUME_SET_ID = "USA_NASA_PDS_GBA _0001" and not
"USA_NASA_JPL_GBAT_0001".  If the volume is not the first in the set,
the VOLUME_SET_ID should already exist.</p>

<p>The VOLUME_ID should conform to PDS naming standards. It should also
be unique within the PDS.</p>

<p>DATA_OBJECT_TYPE should correspond to the primary data type being
delivered. For example, if DATA_OBJECT_TYPE = TABLE, then the main data
files should be tables, with a .TAB extension. In the case of images,
DATA_TYPE = IMAGE implies that the data files should have IMG, IBG, or
IMQ extensions.</p>

<p><b>Step 7 - Check all labels on the volume for syntax and pointer
errors.</b></p>

<p>All labels on the volume must be validated against the current Data
Dictionary. All pointers in a label must be checked to ensure that they
point to a valid object.</p>

<p>Historically, these tests have been performed by LVTOOL, the PDS label
validation software. Note that the output of LVTOOL must be properly 
interpreted.</p>

<p><b>Step 8 - Check that all keywords and standard values on the volume
are in the Data Dictionary.</b></p>

<p>In order for labels to be valid, all their keywords and standard values
must be in the data dictionary.</p>

<p>Historically, this test has been performed by LVTOOL. Note that the
output of LVTOOL must be properly interpreted. When a keyword or standard
value is missing from the data dictionary, it could mean any one of the
following:</p>

<ul>
  <li>The keyword or standard value should be ingested</li>
  <li>The keyword or standard value needs to be approved</li>
  <li>There has been a syntax or typographical error</li>
</ul>

<p><b>Step 9 - For attached labels, ensure that RECORD_TYPE, RECORD_BYTES,
      and related keywords are correct:</b></p>

<p>These tests are performed to ensure consistency between the label and
the data. There are several errors that commonly occur when attached labels
are used with RECORD_TYPE = FIXED. Check the following:</p>

<ul>
  <li>Every line in the label should be padded to the length specified
      in RECORD_BYTES (unless LABEL_RECORDS = 1, where the length of
      the whole label should be RECORD_BYTES)</li>
  <li>The pointer should point correctly to the first data record</li>
  <li>The number of FILE_RECORDS should be correctly given</li>
</ul>

<p>For .TXT and .CAT files, also note:</p>

<ul>
  <li>The RECORD_TYPE must be "STREAM" or "FIXED"</li>
  <li>If RECORD_TYPE = STREAM, then the RECORD_BYTES keyword is not
      allowed</li>
  <li>INTERCHANGE_FORMAT_ALLOWED = ASCII</li>
  <li>For .TXT files, RECORD_BYTES must be less than or equal to 80</li>
  <li>For .CAT files, the line lengths in the description fields must
      be less than or equal to 72</li>
</ul>

<p><b>Step 10 - Check references:</b></p>

<p>The reference file (REF.CAT) should be properly formed. It should 
contain citations made in other CATALOG/*.CAT files and be consistent
with the reference database.</p>

<p>Check for the following consistency errors:</p>
<ul>
  <li>Duplicate citations in REF.CAT</li>
  <li>Citations referenced in a CATALOG/.CAT file that do not
      appear in REF.CAT</li>
  <li>Citations in REF.CAT that do not appear in the reference database</li>
  <li>Citations in REF.CAT that appear differently in the reference
      database.
</ul>

<p>Note: Sometimes, when citations in REF.CAT differ from those in the
database, it is the database citation that needs to be changed.</p>

<p>Also check the syntax of REFKEYID within text descriptions. It should
be uppercase, enclosed in square brackets, and take the form:</p>

<ul>
  <li>[Primary Author(ETAL)Citation Date] - e.g., [SMITHETAL1993]</li>
  <li>Primary Author should match the first name in the citation</li>
  <li>Citation Date should match the date in the citation</li>
</ul>

<p>In the case of multiple citations, the REFKEYIDs should be separated by
a semicolon, not a comma, e.g., [SMITHETAL1993; SMITHETAL1994].</p>

<p><b>Step 11 - Validate the structure of INDEX.TAB and ensure that each
      entry points to a data file:</b></p>
      
<p>Check that INDEX.TAB columns are present for unique values PRODUCT_ID,
VOLUME_ID, DATA_SET_ID, and PRODUCT_CREATION_TIME.</p>
   
<p>Whenever possible, check that INDEX.TAB values fall within their
stated or implied minimum and maximum values. For example, check time
values against the START_TIME and STOP_TIME given in DATASET.CAT.</p>

<p>Check the syntax of INDEX.TAB:</p>
<ul>
  <li>Values must comma separated (CSV)</li>
  <li>If the values are not date/time, enclose the entire column in
      quotes, including whitespace (e.g., "325.098     ")</li>
  <li>If the values are date/time, do not enclose them in double
      quotes (e.g., 1980-11-12T23:59:59Z)</li>
  <li>Values should be checked for proper syntax, according to their
      data type</li>
</ul>      

<p>Check that every entry in INDEX.TAB points to the label for a data
file. Note: the entries point to the label, not to the data directly.</p>

<p><b>Step 12 - Make sure that every data file is pointed to in
      INDEX.TAB:</b></p>

<p>Every data file must have an attached or detached label. Make
sure that every one of these labels is pointed to by an entry in the
INDEX.TAB.</p>

<p><b>Step 13 - Make sure that CUMINDEX.TAB contains all the INDEX.TAB files
for the volume set:</b></p>

<p>Check whether a CUMINDEX.TAB is required. If VOLUMES = 1, it is not
required. Otherwise, it must be present.

<p>As a volume set is assembled, make sure each CUMINDEX.TAB file contains
the INDEX.TAB files for all previously published volume.</p>

<p><b>Step 14 - Make sure all filenames have the proper extension, according
to the data in the file:</b></p>

<p>File extensions should be used to identify the data type of a file. 
Section 10.2.3 lists the required file extensions for key PDS data
types. Section 10.2.4 lists the file extensions reserved for other
types of data.  A filename has the proper extension when:</p>

<ul>
  <li>A file with a required or reserved extension contains the type of data
      assigned to that extension.</li>
  <li>A file with an assigned type of data has the appropriate extension.</li>
</ul>

<p>For example, a file with an .LBL extension should be a PDS label file. 
Conversely, a PDS label file should not have the extension .LAB.</p>

<p><b>Step 15 - Check ASCII files for bad line terminators, line lengths, and
characters:</b></p>

<p>Check that the following is true for all labels, .TXT, and .ASC files:</p>

<ul>
  <li>Line terminators are <CR><LF> pairs.</li>
  <li>There are no embedded <TABS>.</li>
  <li>There are no embedded characters, other than line terminators
      with an ASCII value less than 32 (decimal).</li>
  <li>There are no embedded characters with an ASCII value greater
      than 127 (decimal).</li>
  <li>The line lengths are not greater than 80 characters, including 
      line terminators.</li>
</ul>

<p>With the exception of the line length limit, all these tests should also
hold true for HTML files</p>

<p><b>Step 16 - Check  HTML files for valid syntax and working links:</b></p>

<p>Validate HTML files against the HTML 3.2 DTD and make sure all links
are working properly.</p>

<p><b>Step 17 - Ensure that tabular data displays correctly with
NASAView:</b></p>

<p>NASAView provides a good visual interface for browsing tables.
First it parses the label and reports any syntax errors.  Then it
displays the table.  It is worth checking the columns against the data
type prescribed in the label.  Examine as large a sampling of tables
as feasible.</p>

<p><b>Step 18 - Ensure that images display correctly with NASAView:</b></p>

<p>Use NASAView to view image files.  Check the quality of the
image.  It is also worth checking the image against its description
in the label.  Examine as large a sampling of images as feasible.</p>

<p><b>Step 19 - Ensure that non-ASCII documents are readable:</b></p>

<p>If possible, look at the PDF, MS-WORD, and other non-ASCII
documents in the DOCUMENT directory. Make sure the text is readable
and the illustrations legible. This is especially important for
legacy documents that were scanned into digital form.</p>

<p><b>Step 20 - Check spelling in text files:</b></p>

<p>Ideally, you should check the spelling in all files that contain
descriptive text.  At very least, key files such as AAREADME.TXT,
VOLDESC.CAT, ERRATA.TXT, and the CATALOG files should be checked.  If
time allows, also look at the xxxxINFO.TXT files and key files in the
DOCUMENT directory.</p>

<p><b>Step 21 - Verify software:</b></p>

<p>Software included on a volume should compile and run as described
in the /SOFTWARE/SOFTINFO.TXT file.  If source code is included on
the volume, try to build and execute it on the specified platforms. 
Likewise, if binary code is included, try to run it on the specified
platforms.</p>

<p><b>Step 22 - Check keyword/value pairs for consistency:</b></p>

<p>Examine the "KEYWORD = VALUE" pairs on the volume to find
those that are technically legal but "make no sense." For example,
INSTRUMENT_HOST_ID = VG2 is a legal value, but is out of place on a
Voyager I volume.</p>

<p>There are other cases where a value must be checked against
"outside information." For example: VOLUMES = 8 seems valid. But
if you are checking the ninth volume in a set, it is incorrect.
In fact, experience has shown it worth checking the VOLUMES
keyword, since errors occasionally occur, just like the one in
the example.</p>

<p><b>Step 23 - Test referential integrity with a test ingestion:</b></p>

<p>PDS volumes provide information, mostly through the .CAT files, 
for the high-level PDS catalog. The catalog is a relational database,
and it is important that it maintain referential integrity (RI) as
new information is added.</p>

<p>Currently, there is only one way to make certain of this. That is:
ingest the new information on a copy of the database, then run the
test for referential integrity.</p>

<p>Once the referential integrity test has succeeded, information from
the volume can be ingested into the real catalog. At this point, the
volume should be consistent with PDS standards and the PDS data model,
and should be accepted as valid.</p>

</body>
</html>

